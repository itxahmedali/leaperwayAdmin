/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChildren, QueryList, ViewChild, ElementRef, EventEmitter, Input, Output } from '@angular/core';
import * as PhotoSwipe from 'photoswipe';
import * as PhotoSwipeUI_Default from 'photoswipe/dist/photoswipe-ui-default';
import { GalleryItemComponent } from '../gallery-item/gallery-item.component';
import { NgpService } from '../ngp.service';
import { LightboxAdapter } from '../lightbox-adapter';
var GalleryComponent = /** @class */ (function () {
    function GalleryComponent(ngp, adapter) {
        this.ngp = ngp;
        this.adapter = adapter;
        this.shareLinkClick = new EventEmitter();
        this.subscriptions = [];
        this.images = [];
        this.isBootstrapEnabled = this.adapter.enableBootstrap4;
    }
    /**
     * @return {?}
     */
    GalleryComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.images = (/** @type {?} */ (this.galleryItems.toArray().map((/**
         * @param {?} cp
         * @return {?}
         */
        function (cp) {
            // listen for clicks;
            _this_1.subscriptions.push(cp.clicked.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) { return _this_1.onClick(data); })));
            return cp.image;
        }))));
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) { return sub.unsubscribe(); }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    GalleryComponent.prototype.onClick = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.openPhotoSwipe(data, this.galleryElement);
    };
    /**
     * @private
     * @param {?} img
     * @param {?} galleryDOM
     * @return {?}
     */
    GalleryComponent.prototype.openPhotoSwipe = /**
     * @private
     * @param {?} img
     * @param {?} galleryDOM
     * @return {?}
     */
    function (img, galleryDOM) {
        this.adapter.galleryUID = galleryDOM.nativeElement.getAttribute('data-pswp-uid');
        this.adapter.index = img.id;
        /** @type {?} */
        var PSWP = (/** @type {?} */ (this.ngp.LightboxElement.nativeElement));
        this.pswp = new PhotoSwipe(PSWP, PhotoSwipeUI_Default, this.getImagesAsPhotoswipe(), this.adapter);
        /** @type {?} */
        var _this = this;
        this.pswp.listen('shareLinkClick', (/**
         * @param {?} e
         * @param {?} target
         * @return {?}
         */
        function (e, target) {
            _this.shareLinkClick.emit({ e: e, target: target });
        }));
        this.pswp.init();
        return false;
    };
    /**
     * @private
     * @return {?}
     */
    GalleryComponent.prototype.getImagesAsPhotoswipe = /**
     * @private
     * @return {?}
     */
    function () {
        return this.images.map((/**
         * @param {?} image
         * @return {?}
         */
        function (image) {
            return {
                src: image.largeUrl,
                w: image.width,
                h: image.height,
                pid: image.id,
                title: image.description,
                author: image.author
            };
        }));
    };
    GalleryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ngp-gallery',
                    template: "<div class=\"angular2_photoswipe\" [ngClass]=\"{'card-columns': isBootstrapEnabled }\"  #ngpGallery id=\"sampleId\" itemscope itemtype=\"http://schema.org/ImageGallery\">\n  <ng-content select=\"ngp-gallery-item\"></ng-content>\n</div>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    GalleryComponent.ctorParameters = function () { return [
        { type: NgpService },
        { type: LightboxAdapter }
    ]; };
    GalleryComponent.propDecorators = {
        galleryElement: [{ type: ViewChild, args: ['ngpGallery', { static: true },] }],
        galleryItems: [{ type: ContentChildren, args: [GalleryItemComponent,] }],
        galleryId: [{ type: Input }],
        shareLinkClick: [{ type: Output }]
    };
    return GalleryComponent;
}());
export { GalleryComponent };
if (false) {
    /** @type {?} */
    GalleryComponent.prototype.galleryElement;
    /** @type {?} */
    GalleryComponent.prototype.galleryItems;
    /** @type {?} */
    GalleryComponent.prototype.galleryId;
    /** @type {?} */
    GalleryComponent.prototype.shareLinkClick;
    /** @type {?} */
    GalleryComponent.prototype.subscriptions;
    /** @type {?} */
    GalleryComponent.prototype.isBootstrapEnabled;
    /** @type {?} */
    GalleryComponent.prototype.pswp;
    /** @type {?} */
    GalleryComponent.prototype.images;
    /**
     * @type {?}
     * @private
     */
    GalleryComponent.prototype.ngp;
    /**
     * @type {?}
     * @private
     */
    GalleryComponent.prototype.adapter;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FsbGVyeS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyMl9waG90b3N3aXBlLyIsInNvdXJjZXMiOlsibGliL2dhbGxlcnkvZ2FsbGVyeS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFvQixTQUFTLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBYSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2SixPQUFPLEtBQUssVUFBVSxNQUFNLFlBQVksQ0FBQztBQUN6QyxPQUFPLEtBQUssb0JBQW9CLE1BQU0sdUNBQXVDLENBQUM7QUFFOUUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFOUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBSTVDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RDtJQWtCRSwwQkFBb0IsR0FBZSxFQUFVLE9BQXdCO1FBQWpELFFBQUcsR0FBSCxHQUFHLENBQVk7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFpQjtRQVIzRCxtQkFBYyxHQUFvRCxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRS9GLGtCQUFhLEdBQW1CLEVBQUUsQ0FBQztRQU9qQyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztJQUMxRCxDQUFDOzs7O0lBRUQsNkNBQWtCOzs7SUFBbEI7UUFBQSxtQkFNQztRQUxDLElBQUksQ0FBQyxNQUFNLEdBQUcsbUJBQUssSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxFQUFFO1lBQ25ELHFCQUFxQjtZQUNyQixPQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFDLElBQUksSUFBSyxPQUFBLE9BQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQWxCLENBQWtCLEVBQUMsQ0FBQyxDQUFDO1lBQzVFLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQztRQUNsQixDQUFDLEVBQUMsRUFBQSxDQUFDO0lBQ0wsQ0FBQzs7OztJQUVELHNDQUFXOzs7SUFBWDtRQUNFLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTzs7OztRQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsR0FBRyxDQUFDLFdBQVcsRUFBRSxFQUFqQixDQUFpQixFQUFDLENBQUM7SUFDdkQsQ0FBQzs7Ozs7SUFFRCxrQ0FBTzs7OztJQUFQLFVBQVEsSUFBSTtRQUNWLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNqRCxDQUFDOzs7Ozs7O0lBRU8seUNBQWM7Ozs7OztJQUF0QixVQUF1QixHQUFVLEVBQUUsVUFBc0I7UUFDdkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDakYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQzs7WUFDdEIsSUFBSSxHQUFnQixtQkFBYSxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxhQUFhLEVBQUE7UUFDN0UsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDOztZQUM3RixLQUFLLEdBQUcsSUFBSTtRQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0I7Ozs7O1FBQUUsVUFBVSxDQUFDLEVBQUUsTUFBTTtZQUNwRCxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBQSxFQUFFLE1BQU0sUUFBQSxFQUFFLENBQUMsQ0FBQztRQUMzQyxDQUFDLEVBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDakIsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDOzs7OztJQUVPLGdEQUFxQjs7OztJQUE3QjtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxLQUFLO1lBQzFCLE9BQU87Z0JBQ0wsR0FBRyxFQUFFLEtBQUssQ0FBQyxRQUFRO2dCQUNuQixDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUs7Z0JBQ2QsQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNO2dCQUNmLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDYixLQUFLLEVBQUUsS0FBSyxDQUFDLFdBQVc7Z0JBQ3hCLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTTthQUNyQixDQUFDO1FBQ0osQ0FBQyxFQUFDLENBQUM7SUFFTCxDQUFDOztnQkFoRUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxhQUFhO29CQUN2Qix1UEFBdUM7O2lCQUV4Qzs7OztnQkFWUSxVQUFVO2dCQUlWLGVBQWU7OztpQ0FTckIsU0FBUyxTQUFDLFlBQVksRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7K0JBQ3hDLGVBQWUsU0FBQyxvQkFBb0I7NEJBQ3BDLEtBQUs7aUNBQ0wsTUFBTTs7SUF1RFQsdUJBQUM7Q0FBQSxBQWpFRCxJQWlFQztTQTVEWSxnQkFBZ0I7OztJQUUzQiwwQ0FBc0Y7O0lBQ3RGLHdDQUFxRjs7SUFDckYscUNBQTJCOztJQUMzQiwwQ0FBK0Y7O0lBRS9GLHlDQUFtQzs7SUFDbkMsOENBQTRCOztJQUM1QixnQ0FBaUI7O0lBRWpCLGtDQUFnQjs7Ozs7SUFFSiwrQkFBdUI7Ozs7O0lBQUUsbUNBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGRyZW4sIEFmdGVyQ29udGVudEluaXQsIFF1ZXJ5TGlzdCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPbkRlc3Ryb3ksIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgUGhvdG9Td2lwZSBmcm9tICdwaG90b3N3aXBlJztcbmltcG9ydCAqIGFzIFBob3RvU3dpcGVVSV9EZWZhdWx0IGZyb20gJ3Bob3Rvc3dpcGUvZGlzdC9waG90b3N3aXBlLXVpLWRlZmF1bHQnO1xuXG5pbXBvcnQgeyBHYWxsZXJ5SXRlbUNvbXBvbmVudCB9IGZyb20gJy4uL2dhbGxlcnktaXRlbS9nYWxsZXJ5LWl0ZW0uY29tcG9uZW50JztcbmltcG9ydCB7IEltYWdlIH0gZnJvbSAnLi4vaW1hZ2UnO1xuaW1wb3J0IHsgTmdwU2VydmljZSB9IGZyb20gJy4uL25ncC5zZXJ2aWNlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBMaWdodGJveE9wdGlvbnMgfSBmcm9tICcuLi9saWdodGJveC1vcHRpb25zJztcbmltcG9ydCB7IExpZ2h0Ym94QWRhcHRlciB9IGZyb20gJy4uL2xpZ2h0Ym94LWFkYXB0ZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3AtZ2FsbGVyeScsXG4gIHRlbXBsYXRlVXJsOiAnLi9nYWxsZXJ5LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZ2FsbGVyeS5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgR2FsbGVyeUNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQsIE9uRGVzdHJveSB7XG5cbiAgQFZpZXdDaGlsZCgnbmdwR2FsbGVyeScsIHsgc3RhdGljOiB0cnVlIH0pIGdhbGxlcnlFbGVtZW50OiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcbiAgQENvbnRlbnRDaGlsZHJlbihHYWxsZXJ5SXRlbUNvbXBvbmVudCkgZ2FsbGVyeUl0ZW1zOiBRdWVyeUxpc3Q8R2FsbGVyeUl0ZW1Db21wb25lbnQ+O1xuICBASW5wdXQoKSBnYWxsZXJ5SWQ6IHN0cmluZztcbiAgQE91dHB1dCgpIHNoYXJlTGlua0NsaWNrOiBFdmVudEVtaXR0ZXI8eyBlOiBFdmVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCB9PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICBpc0Jvb3RzdHJhcEVuYWJsZWQ6IGJvb2xlYW47XG4gIHBzd3A6IFBob3RvU3dpcGU7XG5cbiAgaW1hZ2VzOiBJbWFnZVtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbmdwOiBOZ3BTZXJ2aWNlLCBwcml2YXRlIGFkYXB0ZXI6IExpZ2h0Ym94QWRhcHRlcikge1xuICAgIHRoaXMuaW1hZ2VzID0gW107XG4gICAgdGhpcy5pc0Jvb3RzdHJhcEVuYWJsZWQgPSB0aGlzLmFkYXB0ZXIuZW5hYmxlQm9vdHN0cmFwNDtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLmltYWdlcyA9IDxhbnk+dGhpcy5nYWxsZXJ5SXRlbXMudG9BcnJheSgpLm1hcChjcCA9PiB7XG4gICAgICAvLyBsaXN0ZW4gZm9yIGNsaWNrcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGNwLmNsaWNrZWQuc3Vic2NyaWJlKChkYXRhKSA9PiB0aGlzLm9uQ2xpY2soZGF0YSkpKTtcbiAgICAgIHJldHVybiBjcC5pbWFnZTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YiA9PiBzdWIudW5zdWJzY3JpYmUoKSk7XG4gIH1cblxuICBvbkNsaWNrKGRhdGEpIHtcbiAgICB0aGlzLm9wZW5QaG90b1N3aXBlKGRhdGEsIHRoaXMuZ2FsbGVyeUVsZW1lbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBvcGVuUGhvdG9Td2lwZShpbWc6IEltYWdlLCBnYWxsZXJ5RE9NOiBFbGVtZW50UmVmKTogYm9vbGVhbiB7XG4gICAgdGhpcy5hZGFwdGVyLmdhbGxlcnlVSUQgPSBnYWxsZXJ5RE9NLm5hdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBzd3AtdWlkJyk7XG4gICAgdGhpcy5hZGFwdGVyLmluZGV4ID0gaW1nLmlkO1xuICAgIGNvbnN0IFBTV1A6IEhUTUxFbGVtZW50ID0gPEhUTUxFbGVtZW50PnRoaXMubmdwLkxpZ2h0Ym94RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgIHRoaXMucHN3cCA9IG5ldyBQaG90b1N3aXBlKFBTV1AsIFBob3RvU3dpcGVVSV9EZWZhdWx0LCB0aGlzLmdldEltYWdlc0FzUGhvdG9zd2lwZSgpLCB0aGlzLmFkYXB0ZXIpO1xuICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICB0aGlzLnBzd3AubGlzdGVuKCdzaGFyZUxpbmtDbGljaycsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgIF90aGlzLnNoYXJlTGlua0NsaWNrLmVtaXQoeyBlLCB0YXJnZXQgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5wc3dwLmluaXQoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGdldEltYWdlc0FzUGhvdG9zd2lwZSgpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VzLm1hcChpbWFnZSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzcmM6IGltYWdlLmxhcmdlVXJsLFxuICAgICAgICB3OiBpbWFnZS53aWR0aCxcbiAgICAgICAgaDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICBwaWQ6IGltYWdlLmlkLFxuICAgICAgICB0aXRsZTogaW1hZ2UuZGVzY3JpcHRpb24sXG4gICAgICAgIGF1dGhvcjogaW1hZ2UuYXV0aG9yXG4gICAgICB9O1xuICAgIH0pO1xuXG4gIH1cbn1cbiJdfQ==